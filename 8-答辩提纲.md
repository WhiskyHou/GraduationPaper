## 总体介绍
各位老师大家好，我叫侯毅，我的毕业设计题目是基于 Unity 的二维跳台游戏编辑器的设计与实现，然后指导老师是朱文哲老师。

我今天的答辩内容主要按照论文结构进行，首先是研究意义和相关技术，然后是……，一共这五大部分。

## 研究意义和相关技术
### 选题背景
通过 2018 年中国游戏产业报告可以看出，中国游戏行业的营收总数还是很大的，同时在保持一定的增长水平，虽然说 2018 年当年的增长率是今年来最低的，但是这和游戏版号停发有着密不可分的联系，今年游戏版号恢复审批后，国内游戏产业的前景依然可观。

### 研究意义
研究意义方面，

第一是刚才所提到的游戏产业仍处于上升趋势，技术门槛降低，行业人才积累较多，未来游戏产业前景可观。

第二是近年来内容创作和分享这种形式的产品越来越多，覆盖范围比较广，比如视频类、自媒体、公众号等，以短视频举例的话，抖音和快手这两个产品，在近期的日活跃用户排名都是处于前十位置的。可见内容创作和分享这一产品设计理念的优势。

第三是二维跳台游戏这种类型，本身具有非常大的优势。首先就是开发成本低，产品迭代速度快。其次是非常容易在其基础上创新，融合各种各样的玩法。然后就是比较轻度，硬件要求低，能比较好的利用碎片化时间。

第四，就是二维跳台类型的游戏和内容创作与分享这一理念的结合，目前还没有很多成熟的产品，还有很大的竞争空间，如果正式发布的话，很有可能能为开发者带来收入。

### 相关技术概述
接下来简单讲一下使用到的相关技术。

首先是 unity 引擎，这是目前非常流行的游戏引擎，是一款功能非常强大的通用型游戏引擎。它的主要特点可以概括为两大方方面，一是基于 .net 的底层开发，即解决了跨平台的问题，又给开发者提供了更顺手的 C# 开发工具；二是可视化编辑器，它这个引擎的编辑器采用了 all-in-one 的思想，所有的东西几乎都可以用编辑器来编辑，很好用。

然后就是 Nodejs 这个 JavaScript 运行环境，最开始 JavaScript 就是一个在浏览其里运行的脚本语言，但是 Nodejs 的出现，相当于把 JavaScript 的解释器引擎单独拿了出来，这样就可以用 JavaScript 来脱离浏览其来编写软件。然后最主要的优点，就是它采用的是单线程运行、无阻塞，非常适合做 IO 密集型的服务端。

## 业务描述和需求分析
### 业务描述
课题需求简单来说，可以概括为一句话，就是开发一款玩家自主编辑地图关卡并通过网络分享来游玩的二维跳台游戏。

### 功能需求
具体的功能需求可以概括为四点。

一是游戏流程。也就是要有完整的二维跳台游戏规则和游戏过程。

二是用户登录。因为涉及到网络分享，所以必须要有注册登录和用户这个概念。

三是地图编辑器。这个就是本软件的精髓，需要提供一个完整的可视化地图编辑工具。

四就是其它用户交互。这主要包括点赞等功能，和排行榜机制。

### 用例分析
根据功能分析，产出了用例分析图，也就是详细的功能分析，这里可以详细看到用户和所有的用例……

## 软件设计
接下来大概讲一下软件设计的内容。

### 整体架构设计
整体架构上，我采用的是 C/S 结构，客户端这边负责和用户所有的交互功能呢，服务端为所有的客户端提供网络功能支持，然后网络数据存储在数据库中。

然后整个游戏的界面状态和使用流程如图，启动之后进入登录界面，这里可以选择进行注册，成功登录后会进入主界面，从主界面可以……

### 客户端模块设计
对于这个项目来讲，最主要的还是客户端的部分，这个是客户端的状态图，这里的状态设计上是和界面同步的，这里我们可以看到启动后进入到登录界面，强制登录后会进入到主界面。

主界面就是所有功能的入口，从这里我们可以进入到创造界面、游戏地图界面和排行榜界面，相当于就是本项目的三大功能线。

然后这个是客户端模块图，可以看到在模块设计上，我也是遵循刚才所说的三大功能线的。

在编辑器这部分里，又细分为了……

正常游戏这部分里，又细分为了……

然后我将其余的功能模块划分到了一起，包括……

### 服务端模块设计
接下来我们看一下服务端的模块设计。服务端这部分没有过多的特殊设计，主要还是根据客户端的功能需要，进行网络功能支持。

在服务端的整体架构上，我将其设计为三部分，这三部分并不是并列关系，而是上下层的依赖关系，最上层的就是对接外部的请求处理响应模块，其次是中间层逻辑实现模块，最下层是数据库操作模块。

### 数据库设计
最后是数据库的设计，目前来看主要的两个实体就是用户和地图关卡，然后这二者之间又存在四种关系，包含了一对多和多对多的关系，基于这样的实体关系图，在数据存储方面可以完全覆盖所有的需求要求。

## 重点技术实现
接下来我将描述一下开发过程中的部分重要技术点。

### 界面场景绑定
首先是界面和场景的绑定，这里讲的界面就是原型设计的界面，也就是刚才讲状态图时候的界面，然后场景就是 unity 引擎中游戏场景这个概念。

界面和场景绑定这种实现方式，核心就是每一个界面都对应一个场景，界面的切换就是场景的加载，这样的话场景里的所有东西只要和引擎生命周期的钩子挂上就行了，场景间的通信采用独立模块实现，这部分后面会讲到。

然后这样做主要是有两个优点，一是开发模式简洁，减少了场景和界面交叉的情况，开发思路简单，耦合小。二是使用引擎的生命周期管理，而不是手动去编写代码，可以潜在减少 bug 的出现，并且每一次加载场景在本项目中并没有带来性能瓶颈。

### 单例设计模式
然后是单例设计模式，这个单例模式是经典设计模式的一种，指的是在一个程序进程中，这个模块有且仅有一个实例。

单例模式的类经典类图和调用流程可以参考左边的图。

项目中采用了单例模式的主要有这几个部分，一个是文件读写模块，一个是网络请求模块，然后全局对象池，和场景通信模块，……

### 数据流
数据流这部分可以说是这个项目中的特色，其实无论是编辑器和游戏，还是客户端和服务端，它的核心都是数据的流通。

数据的存在方式，主要可以分为两部分，一是被序列化的字符串，二是各个语言环境中的对象。

这二者之间的关系就是，从对象到字符串的序列化，和从字符串到语言对象的反序列化，或者叫解析。

通过这个图我们很清晰的看出数据在整个项目中的传输方式。

### 服务端技术
刚才设计中提到的服务端模块设计，由三个模块组成，并且这三个模块是有上下层关系的，这三部分简单概括就是请求响应处理模块监听客户端的请求，然后去异步调用逻辑接口模块，逻辑接口中需要数据库的数据，去异步调用数据库操作模块。

等于是三个模块，两次异步调动，等待运行结束后再一次返回上衣层级，这样看起来是耗时操作，每一次请求都需要一定时间来响应，但是实现中使用的是 Promise 的异步方法，其实对于整个 Nodejs 服务端进程来说，是没有阻塞的，在一个请求处理的过程中，仍然可以监听后来的请求。

## 播放视频演示 解说

## 总结和改进方向
最后一部分，简单总结一下并且规划一下后续改进方向

### 工作量总结
工作量方面，总共的开发时间历时两个月，客户端功能总共提交 86 次，有效代码 3887 行，服务端提交 35 次，有效代码 1076 行。

### 改进方向
最后是改进方向，……